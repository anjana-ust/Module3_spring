package com.ust.rest.services;

import java.util.ArrayList;
import java.util.List;
import java.util.Optional;



import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.ust.rest.repository.ProductRepositary;

import com.ust.rest.resource.Product;
@Service
public class ProductService {
   @Autowired
	ProductRepositary repository;
	
	
	  public Product getProduct(long productId) {
	  
	  
	  Optional<Product> optional = repository.findById(productId);
	  
	 if(optional.isPresent()) {
		 return optional.get();
	 }
	 else
		 return null;
	  } 

		
		
		/*
		 * public ArrayList<Product> getProducts(){ return repository.getProduct(); }
		 */
		 
	  public List<Product> getProducts(){
		  return repository.findAll();
	  }
	  @Transactional
	  public boolean add(Product product) {
		  if(! validate(product)) {
			  return false; // cannot create duplicate products
		  }else {
			  repository.save(product);
			  return true;
		  }
	  }

		/*
		 * public boolean add(Product product) {
		 * 
		 * repository.save(product); return true; }
		 */
public boolean validate(Product product) {
	if(product.getDescription().equals("apple retina eye")) {
		return true;
		
	}else {
	return false;
}
}
  public Product updateProduct(Product product) { 
	 
	  return repository.save(product); } 

 public void deleteProduct(long
  productId) { 
	 repository.deleteById(productId); 
	 } 
 }
 