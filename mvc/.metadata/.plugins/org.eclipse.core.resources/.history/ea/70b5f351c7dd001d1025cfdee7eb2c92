package com.ust.rest.services;

import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

import javax.transaction.Transactional;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.ust.rest.repository.ProductRepositary;
import com.ust.rest.repository.UserRepository;
import com.ust.rest.resource.Product;
import com.ust.rest.resource.User;
@Service
public class ProductService {
   @Autowired
	ProductRepositary productRepository;
   
	@Autowired
	UserRepository userRepository;
	
	  public Product getProduct(long productId) {
	  
	  
	  Optional<Product> optional = productRepository.findById(productId);
	  
	 if(optional.isPresent()) {
		 return optional.get();
	 }
	 else
		 return null;
	  } 

		
		
		/*
		 * public ArrayList<Product> getProducts(){ return repository.getProduct(); }
		 */
		 
	  public List<Product> getProducts(){
		  return productRepository.findAll();
	  }
	  @Transactional
	 public boolean add(Product product) {
		  
		 productRepository.save(product);
		 User user = new User();
		 user.setUserId(51);
		 user.setDateTime(System.currentTimeMillis()+"");
		 userRepository.save(user);
		  return true;
	 }


  public Product updateProduct(Product product) { 
	 
	  return productRepository.save(product); } 

 public void deleteProduct(long
  productId) { 
	 productRepository.deleteById(productId); 
	 } 
 }
 